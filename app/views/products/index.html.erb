<div class="container">
  <h1 style="text-align: center; margin-bottom: 20px;">Product Listing</h1>

  <div id="product-container" class="grid">
    <%= render @products %>
  </div>

  <% pgid = params[:pgid].to_i %>
  <% pgid = 1 if pgid < 1 %>
  <input type="hidden" id="offset" value="<%= (pgid - 1) * 8 + @products.count %>"> 

  <div id="loading" style="display: none; text-align: center;">
    <div class="loading-spinner"></div>
    Loading more products...
  </div>

  <div id="no-more-products" style="display: none; text-align: center; margin-top: 20px; color: #555;">
    No more products to load.
  </div>
</div>

<%= javascript_include_tag "infinite_scroll", defer: true %>
